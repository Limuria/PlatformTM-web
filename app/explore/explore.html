<div id="top-page-wrapper" class="gray-bg {{$state.current.name}}">

    <!-- Page Header-->
    <div class="row wrapper border-bottom white-bg page-heading"
         style="top: 60px;padding: 10px 10px;position: fixed;width: 100%;z-index: 1030; text-align: center">

        <div class="col-xs-12 col-sm-9 col-md-9 col-lg-10">

                <ul style="list-style: none; display:block; margin: 10px 0 0; padding:0px; font-size: 1.3em">
                    <li style="vertical-align:top; display: inline-block;max-height: 100px;overflow: hidden;text-align: left; border-right: 1px dotted #c7c7c7;   padding: 0px 20px">
                        <h5 style="text-transform: uppercase;margin-bottom: 0px">Human subjects</h5>
                        <span style="display: block;font-size: 20px;color: #39c2d7;padding-top: 5px;">
                            <i class="flaticon-standing55"></i>&nbsp;
                            <dc-count-widget style="font-weight:600;"
                                                 xfilter-service="{{expVM.chartingOpts.subjectXFservice}}"
                                                 chart-service="{{expVM.chartingOpts.DCchartService}}"
                                                 type="sdj"
                                                 module="{{expVM.chartingOpts.subjChartGrp}}">
                                </dc-count-widget>
                        </span>
                        <dc-count-bar
                                xfilter-service="{{expVM.chartingOpts.subjectXFservice}}"
                                chart-service="{{expVM.chartingOpts.DCchartService}}"
                                module="{{expVM.chartingOpts.subjChartGrp}}">
                        </dc-count-bar>
                    </li>

                    <li ng-repeat="assay in expVM.assays"
                        style="display: inline-block;max-height: 100px;overflow: hidden;text-align: left; vertical-align: top;padding: 0px 10px;">
                        <h5 style="text-transform: uppercase; margin-bottom: 0px">
                            {{assay.name}}
                        </h5>
                        <div>
                            <div style="display: inline-block">
                                <span style="display: block;font-size: 20px;color: #39c2d7;padding-top: 5px;">
                                    <i class="flaticon-standing55"></i>&nbsp;
                                       <dc-count-widget style="font-weight:600;"
                                                        xfilter-service="{{expVM.chartingOpts.assayXFservice}}"
                                                        chart-service="{{expVM.chartingOpts.DCchartService}}"
                                                        type="subject"
                                                        module="{{assay.id}}">
                                       </dc-count-widget>
                                </span>
                                <dc-count-bar
                                        xfilter-service="{{expVM.chartingOpts.assayXFservice}}"
                                        chart-service="{{expVM.chartingOpts.DCchartService}}"
                                        type="subject"
                                        module="{{assay.id}}">
                                </dc-count-bar>
                            </div>
                            <div style="display: inline-block">
                                <span style="display: block;font-size: 20px;color: #39c2d7;padding-top: 5px;">
                                    <i class="flaticon-testtube8"></i>&nbsp;
                                       <dc-count-widget style="font-weight:600;"
                                                        xfilter-service="{{expVM.chartingOpts.assayXFservice}}"
                                                        chart-service="{{expVM.chartingOpts.DCchartService}}"
                                                        type="vvv"
                                                        module="{{assay.id}}">
                                       </dc-count-widget>
                                </span>
                                <dc-count-bar
                                        xfilter-service="{{expVM.chartingOpts.assayXFservice}}"
                                        chart-service="{{expVM.chartingOpts.DCchartService}}"
                                        module="{{assay.id}}">
                                </dc-count-bar>
                            </div>
                        </div>
                    </li>
                </ul>
        </div>
    </div>

    <!-- Cart Menu-->
    <div ui-view="datacart" id="cart"></div>


    <div class="page-wrapper wrapper-content animated fadeInRight" id="page-wrapper" style="margin-top: 84px;">

        <div id="explorer-wrapper" style="margin-left:210px;">

           <!-- <div id="topics-array-rows"></div>
            <div id="medium-array-pie"></div>
            <div id="states-pie"></div>
            <div id="dates-bars"></div>
            <script>
                var data = [
                    {"key":"KEY-1","state":"CA", "topics":["Technology", "Science", "Automotive"], "medium":["paper", "web"], "date":new Date("10/02/2012")},
                    {"key":"KEY-2","state":"CA", "topics":["Health"], "medium":["paper"], "date": new Date("10/05/2012")},
                    {"key":"KEY-3","state":"OR", "topics":["Science"], "medium":["web"], "date":new Date("10/08/2012")},
                    {"key":"KEY-4","state":"WA", "topics":["Automotive", "Science"], "medium":["web"], "date":new Date("10/09/2012")},
                    {"key":"KEY-5","state":"WA", "topics":["Science"], "medium":["tv"], "date":new Date("10/09/2012")},
                    {"key":"KEY-6","state":"WA", "topics": ["Health"], "medium":["tv"], "date":new Date("10/03/2012")},
                    {"key":"KEY-7","state":"CA", "topics":["Technology", "Science", "Automotive"], "medium":["paper", "web"], "date":new Date("10/02/2012")},
                    {"key":"KEY-8","state":"OR", "topics":["Health"], "medium":["web", "tv"], "date": new Date("10/06/2012")},
                    {"key":"KEY-9","state":"OR", "topics":["Technology"], "medium":["paper", "tv"], "date":new Date("10/08/2012")},
                ];

                var data2 = [
                    {"key":"KEY-1","state":"CA", "topics":[34, 75, 61,34,86], "medium":["paper", "web"], "date":new Date("10/02/2012")},
                    {"key":"KEY-2","state":"CA", "topics":[68, 74, 34,12,47], "medium":["paper"], "date": new Date("10/05/2012")},
                    {"key":"KEY-3","state":"OR", "topics":[34, 93, 14], "medium":["web"], "date":new Date("10/08/2012")},
                    {"key":"KEY-4","state":"WA", "topics":[34], "medium":["web"], "date":new Date("10/09/2012")},
                    {"key":"KEY-5","state":"WA", "topics":[68, 75, 61,34,86,27,99], "medium":["tv"], "date":new Date("10/09/2012")},
                    {"key":"KEY-6","state":"WA", "topics": [68, 67], "medium":["tv"], "date":new Date("10/03/2012")},
                    {"key":"KEY-7","state":"CA", "topics":[68, 93, 25,96,86], "medium":["paper", "web"], "date":new Date("10/02/2012")},
                    {"key":"KEY-8","state":"OR", "topics":[68, 86], "medium":["web", "tv"], "date": new Date("10/06/2012")},
                    {"key":"KEY-9","state":"OR", "topics":[68, 75, 61,34,86], "medium":["paper", "tv"], "date":new Date("10/08/2012")},
                ];

                var cf = crossfilter(data2);

                // tell crossfilter that this dimension isArray=true
                // var topicsDim = cf.dimension(function(d){ return d.topics;}, true);
                // var topicsGroup = topicsDim.group();

                var topicsDim = cf.dimension(function(d){ return d.topics;}, true);
                var topicsGroup = topicsDim.group();

                var topicsArrayRowChart = dc.barChart("#topics-array-rows",'test')

                    .width(400)
                    .height(200)
                    .transitionDuration(800)
                    .margins({top: 10, right: 50, bottom: 30, left: 40})
                    .x(d3.scaleLinear().domain([10, 100]))
                    // .renderLabel(true)
                    // .height(200)
                    // .width(250)
                     .dimension(topicsDim)
                     .group(topicsGroup)
                    //.chartGroup("test")
                    // .cap(3)
                    // .ordering(function(d){return -d.value;})
                    // .xAxis().ticks(3);

                // tell crossfilter that this dimension isArray=true
                var mediumDim = cf.dimension(function(d){ return d.medium;}, true);
                var mediumGroup = mediumDim.group();

                var mediumArrayPieChart = dc.pieChart("#medium-array-pie",'test')
                    .height(100)
                    .width(100)
                    .dimension(mediumDim)
                    .group(mediumGroup)
                //.chartGroup("test");

                // leave crossfilter isArray default (false)
                var statesDim = cf.dimension(function(d){ return d.state;});
                var stateGroup = statesDim.group();

                var statesPieChart = dc.pieChart("#states-pie",'test')
                    .height(100)
                    .width(100)
                    .dimension(statesDim)
                    .group(stateGroup)
                    //.chartGroup("test");

                // leave crossfilter isArray default (false)
                var datesDim = cf.dimension(function(d){ return d.date;});
                var datesGroup = datesDim.group();

                // var datesBarChart = dc.barChart("#dates-bars")
                //     .width(400)
                //     .height(200)
                //     .transitionDuration(800)
                //     .margins({top: 10, right: 50, bottom: 30, left: 40})
                //     .dimension(datesDim)
                //     .group(datesGroup)
                //     .x(d3.time.scale().domain([new Date(2012, 9, 1), new Date(2012, 9, 11)]))
                //     .xUnits(d3.time.days)
                //     .centerBar(true)
                //     .renderHorizontalGridLines(true)
                //     .brushOn(true)
                //     .xAxis().tickFormat(d3.time.format('%b %d'));

                dc.renderAll('test');
                </script>
-->
            <section ui-view="subjects" id="section-1">
                <i>Subject panel should load here!</i>
            </section>
            <section ui-view="assessments" id="section-2">
                <i>Clinical Assessments panel should load here!</i>
            </section>
            <section ui-view="assays" id="section-3">
                <i>Assays panel should load here!</i>
            </section>
        </div>

    </div>
</div>
