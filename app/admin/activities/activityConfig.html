<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-sm-4">
        <h2>{{ActivityCtrl.activity.isNew ? 'New Activity' :'Activity detail'}}</h2>
        <ol class="breadcrumb">
            <li>
                <a ui-sref="main.home">Home</a>
            </li>
            <li ui-sref="admin.project">
                <a>{{ActivityCtrl.studyId}}</a>
            </li>
            <li class="active">
                <a>{{ActivityCtrl.activity.isNew ? 'New Activity' : vm.activity.name}}</a>
            </li>
        </ol>
    </div>
    <div class="col-sm-8">
        <div class="title-action">
            <a ng-click="ActivityCtrl.saveActivity()" class="btn btn-primary">Save</a>
            <a ng-click="ActivityCtrl.dontSaveActivity()" class="btn btn-primary">Cancel</a>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="wrapper wrapper-content animated fadeInRight">
            <div class="ibox">

                <div class="ibox-content">
                    <div class="row">
                        <div class="col-md-12">
                            <dl class="dl-horizontal">
                                <dt>Activity Title</dt>
                                <dd>
                                    <div class="col-md-6">
                                        <a href="#" e-ng-model="ActivityCtrl.activity.name" editable-text="vm.activity.name" buttons="no" blur="submit">{{ActivityCtrl.activity.name || "Unnamed"}}</a>
                                    </div>
                                </dd>
                            </dl>
                        </div>
                    </div>
                    <!--<div class="row">-->

                        <!--<div class="col-md-6">-->

                            <!--<dl class="dl-horizontal">-->
                                <!--<dt>Class</dt>-->
                                <!--<dd>-->
                                    <!--<div>-->
                                        <!--<select class="form-control m-b" name="activitySelect" id="assayMeasType"-->
                                                <!--ng-model="vm.assay.type" ng-change="vm.updateAssayTerms()">-->
                                            <!--<option ng-repeat="option in vm.assayTypes" value="{{option.assayTypeTerm.id}}">{{option.assayTypeTerm.name}}</option>-->
                                        <!--</select>-->
                                    <!--</div>-->
                                <!--</dd>-->
                                <!--<dt>Domain</dt>-->
                                <!--<dd>-->
                                    <!--<div>-->
                                        <!--<select class="form-control m-b" name="activitySelect" id="assayDesignType"-->
                                                <!--ng-model="vm.assay.design" >-->
                                            <!--<option ng-repeat="option in vm.assayDesigns" value="{{option.id}}">{{option.name}}</option>-->
                                        <!--</select>-->
                                    <!--</div>-->
                                <!--</dd>-->
                            <!--</dl>-->
                        <!--</div>-->
                        <!--&lt;!&ndash;<div class="col-md-6">-->
                            <!--<dl class="dl-horizontal">-->

                                <!--<dt>Technology Type</dt>-->
                                <!--<dd>-->
                                    <!--<div>-->
                                        <!--<select class="form-control m-b" name="activitySelect" id="assayTechSelect"-->
                                                <!--data-ng-model="vm.assay.technology">-->
                                            <!--<option ng-repeat="option in vm.assayTechTerms" value="{{option.id}}">{{option.name}}</option>-->
                                        <!--</select>-->
                                    <!--</div>-->
                                <!--</dd>-->

                                <!--<dt>Technology Platform</dt>-->
                                <!--<dd>-->
                                    <!--<div>-->
                                        <!--<select class="form-control m-b" name="activitySelect" id="assayPlatSelect"-->
                                                <!--data-ng-model="vm.assay.platform">-->
                                            <!--<option ng-repeat="option in vm.assayPlatTerms" value="{{option.id}}">{{option.name}}</option>-->
                                        <!--</select>-->
                                    <!--</div>-->
                                <!--</dd>-->
                            <!--</dl>-->
                        <!--</div>&ndash;&gt;-->
                    <!--</div>-->
                    <!-- <div class="row">
                        <div class="col-lg-5">
                            <dl class="dl-horizontal">

                                <dt>Created by:</dt>
                                <dd>Ibrahim Emam</dd>
                                <dt>Subjects:</dt>
                                <dd> <a href="#" e-ng-model="vmodel.activity.size" editable-text="vm.activity.size" buttons="no" blur="submit">{{vm.activity.size || "Expected No. of subjects"}}</a></dd>
                                <dt>Client:</dt>
                                <dd><a href="" class="text-navy"> Zender Company</a></dd>
                                <dt>Version:</dt>
                                <dd> v1.4.2</dd>
                            </dl>
                        </div>
                        &lt;!&ndash;<div ng-if="!vm.activity.isNew" class="col-lg-7" id="cluster_info">
                            <dl class="dl-horizontal">

                                <dt>Last Updated:</dt>
                                <dd>16.08.2014 12:15:57</dd>
                                <dt>Created:</dt>
                                <dd> 10.07.2014 23:36:57</dd>

                            </dl>
                        </div>&ndash;&gt;
                    </div>-->
                    <!--<div class="row" ng-if="!vm.activity.isNew">
                        <div class="col-lg-12">
                            <dl class="dl-horizontal">
                                <dt>Completed:</dt>
                                <dd>
                                    <div class="progress progress-striped m-b-sm">
                                        <div style="width: 60%;" class="progress-bar"></div>
                                    </div>
                                    &lt;!&ndash; <small>Project completed in <strong>60%</strong>. Remaining close the project, sign a contract and invoice.</small>&ndash;&gt;
                                </dd>
                            </dl>
                        </div>
                    </div>-->
                </div>
            </div>

            <div>
                <div class="ibox-title panel-header">
                    <span style="color: #39b3d7;"></span> Associated Templates
                </div>
                <uib-tabset class="tab-panel">
                    <uib-tab ng-repeat="ds in ActivityCtrl.activity.datasets"  active="$first">
                        <uib-tab-heading>
                            <p class="tab-info">{{ds.domainId}} : {{ds.name}}</p>
                            <p class="tab-info">
                                <i class="fa fa-list-alt"></i>
                            </p>
                            <!--<p class="tab-info text-left" >-->
                            <!--<small>{{ds.description}}</small>-->
                            <!--</p>-->
                        </uib-tab-heading>
                        <div class="tab-content">
                            <div id="{{ds.id}}" class="ibox animated fadeIn" ng-show="ds">

                                <div class="ibox-title">
                                    <div class="ibox-tools">
                                        <a class="btn btn-primary btn-xs" ng-init="vm.creatingCfield = false" ng-click="vm.creatingCfield = !vm.creatingCfield;vm.createNewCfield()">New Template Variable</a>
                                        <a href="" class="btn btn-primary btn-xs">Preview Template</a>
                                        <a href="" class="btn btn-primary btn-xs">Download Template</a>
                                    </div>
                                </div>

                                <!--ADD FIELD DIV-->
                                <div uib-collapse="!vm.creatingCfield" class="ibox-content" style="min-height: 50px;margin: 10px;border: 1px solid white;background-color: rgb(243, 243, 244);">
                                    <form role="form">
                                        <div class="row">
                                            <div class="col-md-11">
                                                <h3>Add New Field</h3>
                                            </div>
                                            <div class="col-md-1"> <span class="pull-right"><a ng-click="vm.cancelAddField()" class="btn btn-white btn-lg"><i class="fa fa-times"></i></a> </span></div>

                                        </div>
                                        <div class="row">
                                            <div class="col-md-7">
                                                <div class="row">
                                                    <div class="col-md-6">

                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label>Name</label>
                                                                    <input ng-model="vm.cField.label" type="text" placeholder="E.g. Averse Event Score" class="form-control">
                                                                </div>
                                                                <div class="col-md-6">
                                                                    <label>Column Header</label>
                                                                    <input ng-model="vm.cField.name" type="text" placeholder="E.g. AESEVSCORE" class="form-control">
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label>Description</label>
                                                                    <textarea class="form-control" ng-model="vm.cField.description"></textarea>
                                                                </div>
                                                                <div class="col-md-6">
                                                                    <label>Data Type</label>
                                                                    <select class="form-control" ng-model="vm.cField.dataType">
                                                                        <option ng-repeat="t in vm.dataTypes">{{t}}</option>
                                                                    </select>
                                                                </div>
                                                            </div>


                                                        </div>


                                                    </div>
                                                    <!--VARIABLES-->
                                                    <div class="col-md-6">
                                                        <label>Variables</label>
                                                        <div class="search-input">
                                                            <input ng-model="searchField" type="text" placeholder="Search fields " class="input input-sm form-control">
                                                            <i class="fa fa-search"></i>
                                                        </div>

                                                        <div class="form-group">
                                                            <div class="field-list">
                                                                <ul>
                                                                    <li data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}"
                                                                        ng-model="var"
                                                                        jqyoui-draggable="{animate:true,placeholder:true,placeholder:'keep',onStart:'vm.prepareEE(var)',dropModel:'ee'}"
                                                                        ng-repeat="var in ds.variables | filter:searchField"
                                                                        ng-click="vm.fieldInfo(var)">
                                                                        <a> <i class="fa fa-ellipsis-v"></i><i class="fa fa-ellipsis-v"></i> {{var.label}}</a></li>
                                                                    <!--ng-class="{'': !isActive, 'selected': isActive}"-->
                                                                    <!--ng-init="isActive = false"-->
                                                                    <!--ng-click="isActive = !isActive"-->

                                                                </ul>
                                                            </div>
                                                            <!--<button type="button" class="btn btn-default btn-xs pull-right m-t-xs btn-outline">Insert Function</button>-->
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <!--EXPRESSION DIV-->
                                                    <div class="col-md-6">
                                                        <div>
                                                            <label>Expression</label>
                                                            <button ng-click="vm.clearExpression()"class="btn btn-default btn-xs pull-right">Clear</button>
                                                        </div>


                                                        <div style="background-color: white; border:1px solid lightgrey;  height: 142px;overflow: scroll; margin-top:3px">

                                                            <!--DIV FOR SIMPLE EXPRESSIONS-->
                                                            <div class="expression"

                                                                 data-drop="true"
                                                                 ng-model='vm.expressionList'
                                                                 jqyoui-droppable="{multiple:true,onDrop:'vm.updateEEseq',beforeDrop: 'vm.beforeDropOverExpressionDiv()'}" style=" height:100%">
                                                                <ul>
                                                                    <li ng-repeat="e in vm.expressionList track by $index"
                                                                        data-drag="true"
                                                                        data-jqyoui-options="{revert: 'invalid', helper: 'clone'}"
                                                                        ng-model="vm.expressionList" jqyoui-draggable="{index: {{$index}},animate:true}">

                                                                        <!--STRING LITERAL-->
                                                                        <span ng-if="e.type == 'syntax' || e.type == 'op'"style="color: #d77329;">{{e.val}}</span>

                                                                        <!-- Droppable VARIABLE-->
                                                                        <div ng-if="e.type=='var'"
                                                                             class="droppable"
                                                                             data-drop="true"
                                                                             ondragenter=""
                                                                             jqyoui-droppable="{index: {{e.seq}},beforeDrop: 'vm.beforeDropOverExpressionElement(e)', onDrop:'vm.varDropped(e)'}"
                                                                             data-ng-model="e.temp">

                                                                            <!-- Dropped element-->
                                                                            <span class="dropped-pill" ng-show="e.temp.val">
                                                                                <!--<a  ng-click="vm.remFromExpression(e)" style="padding-right: 5px;" >-->
                                                                                <!--<i class="fa fa-times"></i></a>-->
                                                                                <span>{{e.temp.display}}</span>
                                                                            </span>
                                                                            <!-- end of Dropped element-->


                                                                            <!-- User input if element not dropped-->
                                                                            <!--THIS IS REALLY NEVER USED SHOULD CONSIDER REMOVING IF USER WILL NOT
                                                                            BE ALLOWED TO ENTER THE VARIABLE BY HAND-->
                                                                            <input placeholder="Insert field here"
                                                                                   ng-model="e.temp.val"
                                                                                   ng-hide="e.temp.val"
                                                                                   ng-disabled="true"
                                                                                   style="background-color:transparent!important; font-size:12px;
                                                                                   border: none;
                                                                                   outline: 0;
                                                                                   height: 1.666666em;
                                                                                   margin: 5px 0px;">
                                                                            <!-- End of User input-->

                                                                        </div>

                                                                        <!-- Droppable Multiple VARIABLE-->
                                                                        <div ng-if="e.type=='multivar'"
                                                                             data-drop="true"
                                                                             class="droppable"
                                                                             jqyoui-droppable="{multiple:true, beforeDrop: 'vm.beforeDropOverExpressionElement(e)',onDrop:'vm.varDropped(e)'}"
                                                                             data-ng-model="e.vars">

                                                                            <!-- Dropped element-->
                                                                            <span ng-repeat="v in e.vars" class="dropped-pill">
                                                                                <!--<a  ng-click="vm.remFromExpression(e)" style="padding-right: 5px;" >-->
                                                                                <!--<i class="fa fa-times"></i></a>-->
                                                                                <span class="pill">{{v.display}}</span>
                                                                            </span>
                                                                            <!-- end of Dropped element-->

                                                                            <!-- User input if element not dropped-->
                                                                            <!--NOT USED-->
                                                                            <input placeholder="Insert field here"
                                                                                   ng-model="e.val"
                                                                                   ng-hide="e.vars.length > 0"
                                                                                   ng-disabled="true"
                                                                                   style="background-color:transparent!important; font-size:12px;
                                                                                   border: none;
                                                                                   outline: 0;
                                                                                   height: 1.666666em;
                                                                                   margin: 5px 0px;">
                                                                            <!-- End of User input-->
                                                                        </div>

                                                                        <!--Droppable VALUE-->
                                                                        <div ng-if="e.type == 'param' "
                                                                             style="padding: 3px;border-radius:5px; border-left: 1px solid #e7eaec;border-right: 1px solid #e7eaec;margin: 3px; display: inline;"
                                                                             data-drop="true"
                                                                             jqyoui-droppable="{index: {{e.seq}},onDrop:'vm.dropTerm(e)',beforeDrop: 'vm.beforeDropOverExpressionElement(e)'}"
                                                                             data-ng-model="e.param">

                                                                            <!-- Dropped element-->
                                                                            <span class="dropped-pill" ng-show="e.param">
                                                                                <!--<a  ng-click="vm.remFromExpression(e)" style="padding-right: 5px;" >-->
                                                                                <!--<i class="fa fa-times"></i></a>-->
                                                                                <span>{{e.display}}</span>
                                                                            </span>
                                                                            <!-- end of Dropped element-->

                                                                            <!-- User input if element not dropped-->
                                                                            <input placeholder="Type or drag term"
                                                                                   ng-model="e.val"
                                                                                   ng-hide="e.param"
                                                                                   ng-change="vm.inputChanged(e)"
                                                                                   style="background-color:transparent!important; font-size:10px;
                                                                                   border: none;
                                                                                   outline: 0;
                                                                                   height: 1.666666em;
                                                                                   width:50px;
                                                                                   text-align: center;
                                                                                   margin: 10px 0px;">
                                                                            <!-- End of User input-->
                                                                        </div>

                                                                    </li>
                                                                    <li class="placeholder" ng-hide="vm.expressionList.length>0">Drag a function or a field here</li>

                                                                </ul>

                                                            </div>

                                                            <!--DIV IF FUNCTION TEMPLATES ARE USED-->
                                                            <!--<div ng-if="vm.cField.usingFunc" style="display: inline;" ng-repeat="e in vm.cField.expressionList track by e.seq">-->

                                                                <!--&lt;!&ndash;STRING LITERAL&ndash;&gt;-->
                                                                <!--<span ng-if="e.type == 'syntax'" style="color: #d77329;">{{e.val}}</span>-->

                                                                <!--&lt;!&ndash; Droppable VARIABLE&ndash;&gt;-->
                                                                <!--<div ng-if="e.type=='var'"-->
                                                                     <!--style="padding: 3px;border-radius:5px; border-left: 1px solid #e7eaec;border-right: 1px solid #e7eaec;margin: 3px; display: inline;"-->
                                                                     <!--data-drop="true"-->
                                                                     <!--jqyoui-droppable="{index: {{e.seq}},beforeDrop: 'vm.beforeDrop(e)'}"-->
                                                                     <!--data-ng-model="e">-->

                                                                    <!--&lt;!&ndash; Dropped element&ndash;&gt;-->
                                                                    <!--<span class="dropped-pill" ng-show="e.val">-->
                                                                        <!--&lt;!&ndash;<a  ng-click="vm.remFromExpression(e)" style="padding-right: 5px;" >&ndash;&gt;-->
                                                                            <!--&lt;!&ndash;<i class="fa fa-times"></i></a>&ndash;&gt;-->
                                                                        <!--<span>{{e}}</span>-->
                                                                    <!--</span>-->
                                                                    <!--&lt;!&ndash; end of Dropped element&ndash;&gt;-->

                                                                    <!--&lt;!&ndash; User input if element not dropped&ndash;&gt;-->
                                                                    <!--<input placeholder="Insert field here"-->
                                                                           <!--ng-model="e.val"-->
                                                                           <!--ng-hide="e.val"-->
                                                                           <!--ng-disabled="true"-->

                                                                           <!--style="background-color:transparent!important; font-size:12px;-->
                                                                           <!--border: none;-->
                                                                           <!--outline: 0;-->
                                                                           <!--height: 1.666666em;-->
                                                                           <!--margin: 5px 0px;">-->
                                                                    <!--&lt;!&ndash; End of User input&ndash;&gt;-->
                                                                <!--</div>-->

                                                                <!--&lt;!&ndash; Droppable Multiple VARIABLE&ndash;&gt;-->
                                                                <!--<div ng-if="e.type=='multivar'"-->
                                                                     <!--style="padding: 3px 9px;border-radius:5px; border-left: 1px solid #e7eaec;border-right: 1px solid #e7eaec;margin: 3px; display: inline;"-->
                                                                     <!--data-drop="true"-->
                                                                     <!--jqyoui-droppable="{multiple:true, beforeDrop: 'vm.beforeDrop(e)'}"-->
                                                                     <!--data-ng-model="e.vars">-->

                                                                    <!--&lt;!&ndash; Dropped element&ndash;&gt;-->
                                                                    <!--<span ng-repeat="v in e.vars" class="dropped-pill">-->
                                                                        <!--&lt;!&ndash;<a  ng-click="vm.remFromExpression(e)" style="padding-right: 5px;" >&ndash;&gt;-->
                                                                            <!--&lt;!&ndash;<i class="fa fa-times"></i></a>&ndash;&gt;-->
                                                                        <!--<span>{{v.display}}</span>-->
                                                                    <!--</span>-->
                                                                    <!--&lt;!&ndash; end of Dropped element&ndash;&gt;-->

                                                                    <!--&lt;!&ndash; User input if element not dropped&ndash;&gt;-->
                                                                    <!--<input placeholder="Insert field here"-->
                                                                           <!--ng-model="e.val"-->
                                                                           <!--ng-hide="e.vars.length > 0"-->
                                                                           <!--ng-disabled="true"-->

                                                                           <!--style="background-color:transparent!important; font-size:12px;-->
                                                                           <!--border: none;-->
                                                                           <!--outline: 0;-->
                                                                           <!--height: 1.666666em;-->
                                                                           <!--margin: 5px 0px;">-->
                                                                    <!--&lt;!&ndash; End of User input&ndash;&gt;-->
                                                                <!--</div>-->

                                                                <!--&lt;!&ndash;Droppable VALUE&ndash;&gt;-->
                                                                <!--<div ng-if="e.type == 'param' "-->
                                                                     <!--style="padding: 3px;border-radius:5px; border-left: 1px solid #e7eaec;border-right: 1px solid #e7eaec;margin: 3px; display: inline;"-->
                                                                     <!--data-drop="true"-->
                                                                     <!--jqyoui-droppable="{index: {{e.seq}},onDrop:'vm.dropTerm(e)',beforeDrop: 'vm.beforeDrop(e)'}"-->
                                                                     <!--data-ng-model="e.param">-->

                                                                    <!--&lt;!&ndash; Dropped element&ndash;&gt;-->
                                                                    <!--<span class="dropped-pill" ng-show="e.param">-->
                                                                        <!--&lt;!&ndash;<a  ng-click="vm.remFromExpression(e)" style="padding-right: 5px;" >&ndash;&gt;-->
                                                                            <!--&lt;!&ndash;<i class="fa fa-times"></i></a>&ndash;&gt;-->
                                                                        <!--<span>{{e.display}}</span>-->
                                                                    <!--</span>-->
                                                                    <!--&lt;!&ndash; end of Dropped element&ndash;&gt;-->

                                                                    <!--&lt;!&ndash; User input if element not dropped&ndash;&gt;-->
                                                                    <!--<input placeholder="Type or drag term"-->
                                                                           <!--ng-model="e.val"-->
                                                                           <!--ng-hide="e.param"-->
                                                                           <!--ng-change="vm.inputChanged(e)"-->
                                                                           <!--style="background-color:transparent!important; font-size:10px;-->
                                                                           <!--border: none;-->
                                                                           <!--outline: 0;-->
                                                                           <!--height: 1.666666em;-->
                                                                           <!--width:50px;-->
                                                                           <!--margin: 10px 0px;">-->
                                                                    <!--&lt;!&ndash; End of User input&ndash;&gt;-->
                                                                <!--</div>-->

                                                            <!--</div>-->
                                                            <!--{{vm.cField.expressionList}}-->
                                                        </div>
                                                        <div class="m-b-sm">
                                                            <button ng-click="vm.addOperator('+')" class="btn btn-white btn-sm"><i class="fa fa-plus"></i></button>
                                                            <button ng-click="vm.addOperator('-')" class="btn btn-white btn-sm"><i class="fa fa-minus"></i></button>
                                                            <button ng-click="vm.addOperator('x')" class="btn btn-white btn-sm"><i class="fa fa-times"></i></button>
                                                            <button ng-click="vm.addOperator('/')" class="btn btn-white btn-sm"><strong>/</strong></button>
                                                            <button ng-click="vm.addOperator('(')" class="btn btn-white btn-sm"><strong>(</strong></button>
                                                            <button ng-click="vm.addOperator(')')" class="btn btn-white btn-sm"><strong>)</strong></button>
                                                        </div>
                                                    </div>
                                                    <!--FUNCTIONS-->
                                                    <div class="col-md-6">
                                                        <label>Functions</label>

                                                        <div class="search-input">
                                                            <input ng-model="searchFunction" type="text" placeholder="Search functions " class="input input-sm form-control" style="">
                                                            <i class="fa fa-search"></i>
                                                        </div>
                                                        <div class="form-group">
                                                            <div class="field-list">
                                                                <ul>
                                                                    <li ng-repeat="func in vm.computeFunctions | filter:searchFunction"ng-model="vm.func" >
                                                                        <a ng-click="vm.addFunc(func)"> <i class="fa fa-ellipsis-v"></i><i class="fa fa-ellipsis-v"></i> {{func.name}}</a></li>
                                                                    </li>

                                                                    <!--ng-class="{'': !isActive, 'selected': isActive}"-->
                                                                    <!--ng-init="isActive = false"-->
                                                                    <!--ng-click="isActive = !isActive"-->

                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!--FIELD INFO-->
                                            <div ng-show="vm.showFieldInfo" style="height: 348px;border-left: white 1px solid;" class="col-md-4">
                                                <div class="form-group">
                                                    <label>Data Type</label>
                                                    <div style="text-transform: capitalize">{{vm.selField.dataType}}</div>
                                                </div>

                                                <div class="form-group">
                                                    <label>Description</label>
                                                    <div>{{vm.selField.description}}</div>
                                                </div>

                                                <div class="form-group">
                                                    <label>Controlled Terms</label>
                                                    <div class="search-input">
                                                        <input ng-model="searchTerm" type="text" placeholder="Search fields " class="input input-sm form-control">
                                                        <i class="fa fa-search"></i>
                                                    </div>
                                                    <div class="field-list">
                                                        <ul>
                                                            <li data-drag="true" data-jqyoui-options="{revert: 'invalid',helper:'clone'}"
                                                                ng-model="term" jqyoui-draggable="{animate:true,placeholder:true,placeholder:'keep'}"
                                                                ng-repeat="term in vm.dictTerms | filter:searchTerm">
                                                                <a> <i class="fa fa-ellipsis-v"></i><i class="fa fa-ellipsis-v"></i> {{term}}</a></li>
                                                            <!--ng-class="{'': !isActive, 'selected': isActive}"-->
                                                            <!--ng-init="isActive = false"-->
                                                            <!--ng-click="isActive = !isActive"-->

                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>



                                        <div class="row">
                                            <div class="col-sm-4">
                                                <button class="btn btn-white btn-sm" ng-click="vm.cancelAddVariableToDS()" type="submit">Cancel</button>
                                                <button class="btn btn-primary btn-sm" ng-click="vm.addVariableToDS()" type="submit">Add Field</button>
                                            </div>


                                        </div>

                                    </form>
                                </div>

                                <!--DATASET  VARIABLES-->
                                <div class="ibox-content">
                                    <h3>Select columns to include in this template</h3>

                                    <!--FOO TABLE-->
                                    <table id="bs_template_tbl" class="footable table table-stripped toggle-arrow-tiny" data-page-size="15">
                                        <thead>
                                        <tr>
                                            <th data-toggle="true">Column</th>
                                            <th>Variable Name</th>
                                            <th>Include</th>
                                            <th data-hide="phone">Mandatory</th>
                                            <th data-hide="all">Description</th>
                                            <th data-hide="all">Controlled Vocabulary</th>
                                            <th data-hide="all">Order</th>
                                            <th data-hide="all">Key Sequence</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="var in ds.variables">
                                            <td>
                                                {{var.name}}
                                            </td>
                                            <td>
                                                {{var.label}}
                                            </td>
                                            <td>
                                                <!--<button type="button" class="btn btn-xs btn-primary" ng-model="var.isSelected" btn-checkbox>
                                                    {{var.isSelected ? 'Included' : 'Excluded'}}
                                                </button>-->
                                                <input  icheck type="checkbox"  ng-model="var.isSelected" >
                                            </td>
                                            <td>
                                                <input  icheck type="checkbox"  ng-model="var.isRequired" >
                                            </td>
                                            <td>
                                                {{var.description}}
                                            </td>
                                            <td>
                                                {{var.dictionaryName}}
                                            </td>
                                            <td>
                                                <a href="#" e-ng-model="var.order" editable-text="var.order" buttons="no" blur="submit">{{var.order || "Undefined"}}</a>
                                            </td>
                                            <td>
                                                <a href="#" e-ng-model="var.sequence" editable-text="var.sequence" buttons="no" blur="submit">{{var.sequence || "Undefined"}}</a>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tfoot>
                                        <tr>
                                            <td colspan="6">
                                                <ul class="pagination pull-right"></ul>
                                            </td>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>

                            </div>

                        </div>
                    </uib-tab>

                    <uib-tab class="odd">
                        <uib-tab-heading>
                            <p class="tab-info">Add New Dataset</p>
                            <p class="tab-info">
                                <i class="fa fa-plus-circle"></i>
                            </p>
                            <!--<p class="tab-info text-left" >
                                <small>{{ds.description}}</small>
                            </p>-->
                        </uib-tab-heading>
                        <div class="tab-content">
                            <div>
                                <h5>Select dataset template</h5>
                            </div>
                            <div style="border: 1px solid white; padding: 10px; margin-left: 1%" >
                                <span>Class:</span><span>{{vm.clinicaldomains.preview.class}}</span>
                                <p>{{vm.clinicaldomains.preview.description}}</p>
                            </div>

                            <div id="data-accordion" style="margin: 1.5%">
                                <!--<div class="panel" style="border: 0; width:100%">-->

                                <div class="section-block-header" style="cursor: pointer" id="clinicaldata" data-toggle="collapse" data-parent="#data-accordion" data-target="#clinicadata-content">
                                    Data Templates
                                </div>
                                <div id="clinicadata-content" class="assessment-list collapse in" >

                                    <div style="padding: 5px;font-size: 0.7em;font-weight: bolder;">
                                        Search: <input ng-model="searchText">
                                    </div>
                                    <div style="height: 200px; overflow-y: scroll;">
                                        <ul>
                                            <li ng-click="vm.selectTemplate(domain.domainId)"
                                                ng-repeat="domain in vm.clinicaldomains | filter:{name: searchText}"
                                                ng-mouseover="vm.mouseOverDataset(domain)">
                                                {{domain.name}} - ({{domain.code}})
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </uib-tab>

                </uib-tabset>
            </div>
        </div>
    </div>
    <!--<div class="col-lg-3">
        <div class="wrapper wrapper-content project-manager">
&lt;!&ndash;            <h4>Project description</h4>
            <img src="img/zender_logo.png" class="img-responsive">

            <p class="small">
                There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look
                even slightly believable. If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing
            </p>

            <p class="small font-bold">
                <span><i class="fa fa-circle text-warning"></i> High priority</span>
            </p>
            <h5>Project tag</h5>
            <ul class="tag-list" style="padding: 0">
                <li><a href=""><i class="fa fa-tag"></i> Zender</a></li>
                <li><a href=""><i class="fa fa-tag"></i> Lorem ipsum</a></li>
                <li><a href=""><i class="fa fa-tag"></i> Passages</a></li>
                <li><a href=""><i class="fa fa-tag"></i> Variations</a></li>
            </ul>&ndash;&gt;
            <h5>Associated Data files</h5>
            <ul class="list-unstyled project-files">
                <li><a href=""><i class="fa fa-file"></i> P-BVS_1.csv</a></li>
                <li><a href=""><i class="fa fa-file"></i> P-BVS_2.csv</a></li>
                <li><a href=""><i class="fa fa-file"></i> Sample_protocol.doc</a></li>
                <li><a href=""><i class="fa fa-file"></i> Contact_20_11_2014.docx</a></li>
            </ul>
&lt;!&ndash;            <div class="text-center m-t-md">
                <a href="" class="btn btn-xs btn-primary">Add files</a>
                <a href="" class="btn btn-xs btn-primary">Report contact</a>

            </div>&ndash;&gt;
        </div>
    </div>-->
</div>
